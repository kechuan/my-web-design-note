/* Information
----------------------------------------------
File Name : snow.js
URL : http://www.atokala.com/
Copyright : (C)atokala
Author : Masahiro Abe
--------------------------------------------*/
var ATSnow=function(e){var t=this;var n=[];var r=0;var i=0;var s=0;var o=document;var u={count:100,interval:40,maxSize:5,minSize:1,leftMargin:50,rightMargin:50,bottomMargin:30,maxDistance:10,minDistance:1};this.config=function(t){for(var n in t){if(!e.hasOwnProperty(n)){continue}u[n]=t[n]}};this.addEvent=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(window.attachEvent){e.attachEvent("on"+t,function(){n.apply(e)})}};var a={ua:navigator.userAgent,ie:function(){return this.ua.indexOf("MSIE")>=0},ie6:function(){return this.ua.indexOf("MSIE 6")>=0},ieStandard:function(){if(o.compatMode&&o.compatMode=="CSS1Compat"){return true}return false},iphone:function(){return this.ua.indexOf("iPhone")>=0},ipad:function(){return this.ua.indexOf("iPad")>=0},android:function(){return this.ua.indexOf("Android")>=0}};this.getScrollWidth=function(){if(o.documentElement.scrollWidth){return o.documentElement.scrollWidth}else if(a.ie()&&!a.ieStandard()){return o.body.scrollWidth}};this.getScrollHeight=function(){if(o.documentElement.scrollHeight){return o.documentElement.scrollHeight}else if(a.ie()&&!a.ieStandard()){return o.body.scrollHeight}};this.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};this.getWindowWidth=function(){if(window.innerWidth){return window.innerWidth}else if(a.ie()){if(a.ie6()&&a.ieStandard()){return o.documentElement.clientWidth}else{if(!o.documentElement.clientWidth){return o.body.clientWidth}else{return o.documentElement.clientWidth}}}};this.getWindowHeight=function(){if(window.innerHeight){return window.innerHeight}else if(a.ie()){if(a.ie6()&&a.ieStandard()){return o.documentElement.clientHeight}else{if(!o.documentElement.clientHeight){return o.body.clientHeight}else{return o.documentElement.clientHeight}}}};this.createSnow=function(){var e=o.getElementsByTagName("body")[0];for(var r=0;r<u.count;r++){var i=o.createElement("div");i.className="snow";var s=t.getRandomInt(u.minSize,u.maxSize);i.style.width=s+"px";i.style.height=s+"px";n[r]={};var a=n[r];a.ele=i;a.distance=t.getRandomInt(u.minDistance,u.maxDistance);a.degree=t.getRandomInt(1,10);a.move=0;a.size=s;e.appendChild(i)}};this.snowsPositionReset=function(){for(var e=0;e<u.count;e++){var i=Math.floor(Math.random()*r);t.snowPositionReset(n[e],i-r)}};this.snowPositionReset=function(e,n){var r=t.getRandomInt(u.leftMargin,i-u.rightMargin);e.ele.style.top=n+"px";e.ele.style.left=r+"px";e.x=r};this.move=function(){var e=function(){for(var i=0;i<u.count;i++){var s=n[i];var o=parseInt(s.ele.style.top);s.move+=s.degree;if(o>=r-u.bottomMargin){t.snowPositionReset(s,0)}else{s.ele.style.top=o+s.size+"px";s.ele.style.left=s.x+Math.cos(s.move*Math.PI/180)*s.distance+"px"}}setTimeout(function(){e()},u.interval)};e()};this.load=function(){if(a.iphone()||a.ipad()||a.android()){return}t.config(e);r=t.getScrollHeight();i=t.getWindowWidth();s=t.getWindowHeight();t.createSnow();t.snowsPositionReset();t.move();t.addEvent(window,"resize",function(){r=t.getScrollHeight();i=t.getWindowWidth();s=t.getWindowHeight();t.snowsPositionReset()})}}