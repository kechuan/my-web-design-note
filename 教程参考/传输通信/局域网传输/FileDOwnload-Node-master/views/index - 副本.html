<!DOCTYPE html>
<html>
<head>
    <title>Â±ÄÂüüÁΩë‰º†Ëæì</title>
    <link rel='stylesheet' href='/stylesheets/font.css'/>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" id='view' href="/stylesheets/<%= view %>.css">
    <link rel="stylesheet" href="/stylesheets/iconfont/icons.css">
</head>

<body>
    <script src='/js/view.js'></script>
    <script src='/js/iconfont.js'></script>
<!--Êñá‰ª∂Â§πÊòæÁ§∫ÊïàÊûú-->
<!-- test:D:\\All Local Downloads\\MobileFile -->
 <div id="nav">kechuanÁöÑÊñá‰ª∂ÂàÜ‰∫´È°µÈù¢</div>
 <div id="path">
    <!-- (ÂΩìÂâçÂàÜÂâ≤Á¨¶:<%=filepath.split('\\').length-2%> <%=filepath.split('\\')%>) -->
    <a href="/file" id='menu'>Indexüè†</a>
    <ul>
        <% for(var i=0; i<= filepath.split('\\').length-2; i++){ %>

        <%# for(let i in (filepath.split('\\')) ){ %>
            
            <li>
                <%var array = []; var string = []%>

                <a href="http://<%= dataip %>/filelist?path=<% for(var j=0; j<=i; j++){%><%array.push(filepath.split('\\')[j])%><%string.push(array);string.join('\\')%><%}%><%=string[i].toString().replace(/\,/g,'\\')%>"><%= array[i] %>                  
                </a>
            </li>
            
            <div id="text">/</div> 

        <%}%>
    </ul>
 </div> 

<div id="files">
<!-- Êñá‰ª∂Â§πÊòæÁ§∫ -->
    <ul id='information'>
        <li id='name'></li>
        <li id='size'></li>
    </ul>

    <ul id='dirlist'>
        <!-- Ê†πÊçÆindex.jsËé∑ÂèñÁöÑÊï∞ÁªÑÈïøÂ∫¶ËøîÂõûÊñá‰ª∂ÂàóË°® -->
        <% for(var i=0; i<= dirlist.length-1; i++){ %>
            <a href="http://<%= dataip %>/filelist?path=<%= dirlist[i] %>" class="folder" >
                <svg class="icons" aria-hidden="true">
                  <use xlink:href="#directory_md"></use>
                </svg>

                <li class="folder">  
                    <div class="dirname"><%= dirnamelist[i] %></div>
                    <div class="filesize">‚Äî</div>   
                </li>
            </a>
                
        <%}%>
    </ul>

<!--Êñá‰ª∂ÊòæÁ§∫-->
    <ul id='filelist'>
        <% for(var i=0; i<= filelist.length-1; i++){ %>
            <a href="http://<%= dataip %>/filedownload?path=<%= filelist[i] %>" class="folder"> 
                <svg class="icons" aria-hidden="true">
                    <%#var filename = decodeURIComponent(filelist[i])%>
                    <%var video_fliter = /\.mkv|mp4|flv|webv|m2ts|rmvb$/%>
                    <%var audio_fliter = /\.mp3|aac|flac|ogg|opus|aiff|alac$/%>
                    <%var picture_fliter = /\.jpe?g|png|bmp|webp$/%>
                    <%var compress_fliter = /\.zip|rar|7z|\d{2}$/%>
                    <%var text_fliter = /\.txt|md|lrc|ini|json|cfg$/%>

                    <use xlink:href="
                        <%if(video_fliter.test(extlist[i])){%>
                        <%="#ext-video"%>
                        <%}else if(audio_fliter.test(extlist[i])){%>
                        <%="#ext-audio"%>
                        <%}else if(picture_fliter.test(extlist[i])){%>
                        <%="#ext-picture"%>
                        <%}else if(text_fliter.test(extlist[i])){%>
                        <%="#ext-txt"%>
                        <%}else if(compress_fliter.test(extlist[i])){%>
                        <%="#ext-compress"%>
                        <%}else{%>
                        <%="#ext-unknown"%>
                        <%}%>">  
                    </use> 
                    
                </svg>

                <li class="file"> 
                    <div class="filename">
                        <%if(filenamelist[i].length>100){%>
                        <% var overflow = (filenamelist[i]).slice(0,100) %>
                        <%= `${overflow}...` %>
                        

                        <%}else{%>
                        <%= filenamelist[i] %>

                        <%}%>
                    </div>

                    <div class="filesize">
                        <% if(sizelist[i]<1024){ %>
                        <%= `${sizelist[i]}B` %>
                        <%}else if(sizelist[i]<Math.pow(1024, 2)){%>
                        <%= `${(sizelist[i]/1024).toFixed(2)}KB`%>
                        <%}else if(sizelist[i]<Math.pow(1024, 3)){%>
                        <%= `${(sizelist[i]/Math.pow(1024, 2)).toFixed(2)}MB`%>
                        <%}else{%>
                        <%= `${(sizelist[i]/Math.pow(1024, 3)).toFixed(2)}GB`%>
                        <%}%>

                    </div>
                </li>
            </a>
       
        
        <%}%>
    </ul>
</div>

<!-- #ext-video -->



<div id="setting">
    <a href="javascript:void(0)">
        <div id="view_change" onclick="change()">
            <div id="grid_view">
                
                <svg t="1660929692348" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1078" width="20" height="20"><path d="M0 768 1024 768 1024 1024 0 1024 0 768ZM0 384 1024 384 1024 640 0 640 0 384ZM0 0 1024 0 1024 256 0 256 0 0Z" p-id="1079" fill="#fff" aria-hidden='true'></path></svg>
                
            </div>
            

            <div id="list_view">
                <svg t="1660933116420" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1391" width="27" height="27"><path d="M454.70528001 483.267968H156.3776a28.78848 28.78848 0 0 1-28.78848-28.844928V156.3776a28.78848 28.78848 0 0 1 28.78848-28.78848h298.32768001A28.78848 28.78848 0 0 1 483.776 156.3776v298.04544a28.84492799 28.84492799 0 0 1-29.07071999 28.844928zM867.6224 896.41088h-298.04544a28.78848 28.78848 0 0 1-28.78848-28.78848v-298.04544a28.78848 28.78848 0 0 1 28.78848-28.844928H867.6224a28.78848 28.78848 0 0 1 28.78848 28.844928V867.6224a28.78848 28.78848 0 0 1-28.78848 28.78848zM867.6224 483.267968h-298.04544a28.78848 28.78848 0 0 1-28.78848-28.844928V156.3776a28.78848 28.78848 0 0 1 28.78848-28.78848H867.6224a28.78848 28.78848 0 0 1 28.78848 28.78848v298.04544a28.78848 28.78848 0 0 1-28.78848 28.844928zM454.70528001 896.41088H156.3776a28.78848 28.78848 0 0 1-28.78848-28.78848v-298.04544a28.78848 28.78848 0 0 1 28.78848-28.844928h298.32768001A28.84492799 28.84492799 0 0 1 483.776 569.57696V867.6224a28.78848 28.78848 0 0 1-29.07071999 28.78848z" fill="#fff" p-id="1392" aria-hidden='true'></path></svg>
            </div>
        </div>
    </a>
</div>



ÂõæÊ†áÂ±ïÁ§∫Ê°Ü
<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-video"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory_md"></use>
</svg>

ËÆ°Âàí:
ÂõæÊ†áËá™ÂÆö‰πâ
Ê∑±ÊµÖËÉåÊôØÈó¥Èöî


</body>
</html>
